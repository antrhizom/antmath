<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mathe-Fortgeschritten: Erweiterte Rechenaufgaben</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const ChevronRight = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
            </svg>
        );

        const Award = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="12" cy="8" r="7"></circle>
                <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
            </svg>
        );

        const Printer = () => (
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="6 9 6 2 18 2 18 9"></polyline>
                <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                <rect x="6" y="14" width="12" height="8"></rect>
            </svg>
        );

        const TrendingUp = ({ className }) => (
            <svg className={className} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
                <polyline points="17 6 23 6 23 12"></polyline>
            </svg>
        );

        const MathAdvancedQuiz = () => {
            const [stage, setStage] = useState('welcome');
            const [username, setUsername] = useState('');
            const [currentRound, setCurrentRound] = useState(0);
            const [currentPuzzle, setCurrentPuzzle] = useState(0);
            const [answers, setAnswers] = useState([]);
            const [showFeedback, setShowFeedback] = useState(false);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [learnings, setLearnings] = useState([]);
            const [showHint, setShowHint] = useState(false);
            const [showContinueOption, setShowContinueOption] = useState(false);

            const allRounds = [
                // Runde 1 - Pflicht
                [
                    {
                        category: "Mehrschrittige Rechnung",
                        color: "blue",
                        puzzle: "Ein Restaurant hat 15 Tische mit je 4 StÃ¼hlen und 8 Tische mit je 6 StÃ¼hlen. Wie viele SitzplÃ¤tze gibt es insgesamt?",
                        options: ["98", "102", "108", "112"],
                        correct: "108",
                        explanation: "Erst berechnen wir die SitzplÃ¤tze der ersten Tische: 15 Ã— 4 = 60. Dann die zweiten Tische: 8 Ã— 6 = 48. Zusammen: 60 + 48 = 108 SitzplÃ¤tze.",
                        hint: "Berechne erst jede Tischgruppe einzeln, dann addiere beide Ergebnisse."
                    },
                    {
                        category: "Prozentrechnung",
                        color: "green",
                        puzzle: "Ein Fahrrad kostet normalerweise 240 Euro. Im Angebot gibt es 25% Rabatt. Wie viel kostet das Fahrrad im Angebot?",
                        options: ["160 Euro", "180 Euro", "200 Euro", "215 Euro"],
                        correct: "180 Euro",
                        explanation: "25% von 240 Euro sind: 240 Ã· 4 = 60 Euro Rabatt. Der neue Preis ist: 240 - 60 = 180 Euro.",
                        hint: "25% ist dasselbe wie ein Viertel. Teile den Preis durch 4 und ziehe das Ergebnis ab."
                    },
                    {
                        category: "VerhÃ¤ltnisse",
                        color: "purple",
                        puzzle: "In einer Klasse sind 28 SchÃ¼ler. Das VerhÃ¤ltnis von Jungen zu MÃ¤dchen ist 3:4. Wie viele MÃ¤dchen sind in der Klasse?",
                        options: ["12", "14", "16", "18"],
                        correct: "16",
                        explanation: "Das VerhÃ¤ltnis 3:4 bedeutet 3+4=7 Teile. Ein Teil ist: 28 Ã· 7 = 4 SchÃ¼ler. MÃ¤dchen sind 4 Teile: 4 Ã— 4 = 16 MÃ¤dchen.",
                        hint: "Addiere erst die VerhÃ¤ltniszahlen (3+4), dann teile die Gesamtzahl durch diese Summe."
                    }
                ],
                // Runde 2 - Optional
                [
                    {
                        category: "Durchschnittsrechnung",
                        color: "orange",
                        puzzle: "Marie macht 4 Tests. Die Noten sind: 2, 3, 2, 1. Was ist ihre Durchschnittsnote?",
                        options: ["1,5", "2", "2,5", "3"],
                        correct: "2",
                        explanation: "Alle Noten addieren: 2+3+2+1 = 8. Durch die Anzahl der Tests teilen: 8 Ã· 4 = 2.",
                        hint: "Addiere alle Werte und teile durch die Anzahl der Werte."
                    },
                    {
                        category: "FlÃ¤che berechnen",
                        color: "red",
                        puzzle: "Ein rechteckiger Garten ist 12 Meter lang und 8 Meter breit. Wie groÃŸ ist die FlÃ¤che?",
                        options: ["76 mÂ²", "86 mÂ²", "96 mÂ²", "106 mÂ²"],
                        correct: "96 mÂ²",
                        explanation: "Die FlÃ¤che eines Rechtecks ist: LÃ¤nge Ã— Breite = 12 Ã— 8 = 96 mÂ².",
                        hint: "Bei einem Rechteck: LÃ¤nge mal Breite."
                    },
                    {
                        category: "Bruchrechnung",
                        color: "cyan",
                        puzzle: "Von einem Kuchen isst Anna 1/4 und Ben isst 1/3. Wie viel vom Kuchen wurde insgesamt gegessen?",
                        options: ["5/12", "7/12", "2/7", "4/7"],
                        correct: "7/12",
                        explanation: "Wir bringen beide BrÃ¼che auf denselben Nenner (12): 1/4 = 3/12 und 1/3 = 4/12. Zusammen: 3/12 + 4/12 = 7/12.",
                        hint: "Finde den gemeinsamen Nenner (12), dann addiere die ZÃ¤hler."
                    }
                ],
                // Runde 3 - Optional
                [
                    {
                        category: "Zeitberechnung",
                        color: "pink",
                        puzzle: "Ein Zug fÃ¤hrt um 14:35 Uhr ab und kommt um 17:20 Uhr an. Wie lange dauert die Fahrt?",
                        options: ["2 Stunden 35 Min.", "2 Stunden 45 Min.", "3 Stunden 15 Min.", "3 Stunden 45 Min."],
                        correct: "2 Stunden 45 Min.",
                        explanation: "Von 14:35 bis 17:35 sind 3 Stunden. Da der Zug schon um 17:20 ankommt, ziehen wir 15 Min. ab: 3 Std. - 15 Min. = 2 Std. 45 Min.",
                        hint: "Rechne erst die vollen Stunden, dann korrigiere die Minuten."
                    },
                    {
                        category: "Kombinierte Operationen",
                        color: "yellow",
                        puzzle: "Ein Laden verkauft T-Shirts fÃ¼r 15 Euro und Hosen fÃ¼r 35 Euro. Lisa kauft 3 T-Shirts und 2 Hosen. Wie viel bezahlt sie?",
                        options: ["105 Euro", "115 Euro", "125 Euro", "135 Euro"],
                        correct: "115 Euro",
                        explanation: "T-Shirts: 3 Ã— 15 = 45 Euro. Hosen: 2 Ã— 35 = 70 Euro. Gesamt: 45 + 70 = 115 Euro.",
                        hint: "Berechne jeden Artikeltyp einzeln, dann addiere beide Summen."
                    },
                    {
                        category: "Restrechnung",
                        color: "indigo",
                        puzzle: "Max hat 50 Euro. Er kauft 3 BÃ¼cher fÃ¼r je 12 Euro. Wie viel Geld hat er danach noch?",
                        options: ["12 Euro", "14 Euro", "16 Euro", "18 Euro"],
                        correct: "14 Euro",
                        explanation: "Die BÃ¼cher kosten: 3 Ã— 12 = 36 Euro. Rest: 50 - 36 = 14 Euro.",
                        hint: "Berechne erst die Gesamtkosten, dann ziehe sie vom Startbetrag ab."
                    }
                ],
                // Runde 4 - Optional
                [
                    {
                        category: "Umfang berechnen",
                        color: "teal",
                        puzzle: "Ein quadratischer Spielplatz hat eine SeitenlÃ¤nge von 25 Metern. Wie lang ist der Zaun um den ganzen Spielplatz?",
                        options: ["75 m", "100 m", "125 m", "150 m"],
                        correct: "100 m",
                        explanation: "Ein Quadrat hat 4 gleich lange Seiten. Umfang = 4 Ã— SeitenlÃ¤nge = 4 Ã— 25 = 100 m.",
                        hint: "Ein Quadrat hat 4 Seiten. Multipliziere die SeitenlÃ¤nge mit 4."
                    },
                    {
                        category: "Preis-Vergleich",
                        color: "rose",
                        puzzle: "Saft A: 1,5 Liter fÃ¼r 3 Euro. Saft B: 2 Liter fÃ¼r 3,60 Euro. Welcher Saft ist gÃ¼nstiger pro Liter?",
                        options: ["Saft A", "Saft B", "Beide gleich teuer", "Kann man nicht sagen"],
                        correct: "Saft B",
                        explanation: "Saft A: 3 Ã· 1,5 = 2 Euro pro Liter. Saft B: 3,60 Ã· 2 = 1,80 Euro pro Liter. Saft B ist gÃ¼nstiger.",
                        hint: "Teile jeweils den Preis durch die Literzahl, um den Preis pro Liter zu erhalten."
                    },
                    {
                        category: "Prozentuale VerÃ¤nderung",
                        color: "amber",
                        puzzle: "Ein Artikel kostet 80 Euro. Der Preis wird um 10% erhÃ¶ht. Was ist der neue Preis?",
                        options: ["86 Euro", "88 Euro", "90 Euro", "92 Euro"],
                        correct: "88 Euro",
                        explanation: "10% von 80 Euro sind: 80 Ã· 10 = 8 Euro. Der neue Preis ist: 80 + 8 = 88 Euro.",
                        hint: "10% ist dasselbe wie ein Zehntel. Teile durch 10 und addiere das Ergebnis."
                    }
                ]
            ];

            const getColorClasses = (color) => {
                const colorMap = {
                    'blue': { bg: 'bg-blue-50', border: 'border-blue-600', label: 'bg-blue-200' },
                    'green': { bg: 'bg-green-50', border: 'border-green-600', label: 'bg-green-200' },
                    'purple': { bg: 'bg-purple-50', border: 'border-purple-600', label: 'bg-purple-200' },
                    'orange': { bg: 'bg-orange-50', border: 'border-orange-600', label: 'bg-orange-200' },
                    'red': { bg: 'bg-red-50', border: 'border-red-600', label: 'bg-red-200' },
                    'cyan': { bg: 'bg-cyan-50', border: 'border-cyan-600', label: 'bg-cyan-200' },
                    'pink': { bg: 'bg-pink-50', border: 'border-pink-600', label: 'bg-pink-200' },
                    'yellow': { bg: 'bg-yellow-50', border: 'border-yellow-600', label: 'bg-yellow-200' },
                    'indigo': { bg: 'bg-indigo-50', border: 'border-indigo-600', label: 'bg-indigo-200' },
                    'teal': { bg: 'bg-teal-50', border: 'border-teal-600', label: 'bg-teal-200' },
                    'rose': { bg: 'bg-rose-50', border: 'border-rose-600', label: 'bg-rose-200' },
                    'amber': { bg: 'bg-amber-50', border: 'border-amber-600', label: 'bg-amber-200' }
                };
                return colorMap[color] || colorMap['blue'];
            };

            const handleStart = () => {
                if (username.trim()) {
                    setStage('quiz');
                }
            };

            const handleAnswer = (answer) => {
                setSelectedAnswer(answer);
                setShowFeedback(true);

                const currentData = allRounds[currentRound][currentPuzzle];
                const isCorrect = answer === currentData.correct;

                setAnswers([...answers, {
                    category: currentData.category,
                    correct: isCorrect,
                    puzzle: currentData.puzzle.substring(0, 50) + "..."
                }]);

                if (isCorrect) {
                    setLearnings([...learnings, {
                        category: currentData.category,
                        puzzle: currentData.puzzle.substring(0, 60) + "...",
                        explanation: currentData.explanation
                    }]);
                }
            };

            const handleNext = () => {
                setShowFeedback(false);
                setSelectedAnswer(null);
                setShowHint(false);

                if (currentPuzzle < allRounds[currentRound].length - 1) {
                    setCurrentPuzzle(currentPuzzle + 1);
                } else if (currentRound === 0) {
                    setShowContinueOption(true);
                    setStage('certificate');
                } else if (currentRound < allRounds.length - 1) {
                    setCurrentRound(currentRound + 1);
                    setCurrentPuzzle(0);
                } else {
                    setShowContinueOption(false);
                    setStage('certificate');
                }
            };

            const handleContinue = () => {
                setCurrentRound(currentRound + 1);
                setCurrentPuzzle(0);
                setStage('quiz');
                setShowContinueOption(false);
            };

            const handleFinish = () => {
                setShowContinueOption(false);
                setStage('certificate');
            };

            const handlePrint = () => {
                window.print();
            };

            const correctAnswers = answers.filter(a => a.correct).length;
            const totalAnswers = answers.length;

            if (stage === 'welcome') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-purple-100 p-8">
                        <div className="max-w-2xl mx-auto bg-white rounded-lg shadow-xl p-8">
                            <div className="flex items-center justify-center mb-6">
                                <TrendingUp className="w-12 h-12 text-blue-600 mr-4" />
                                <h1 className="text-4xl font-bold text-gray-800">
                                    Mathe-Fortgeschritten
                                </h1>
                            </div>
                            <div className="prose prose-lg mb-8">
                                <p className="text-gray-700">
                                    Willkommen beim erweiterten Mathe-Training! Hier Ã¼bst du komplexere Aufgaben mit mehreren Rechenschritten.
                                </p>
                                <p className="text-gray-700">
                                    <strong>Perfekt fÃ¼r:</strong> Fortgeschrittene AnfÃ¤nger, die bereit sind fÃ¼r mehr Herausforderungen.
                                </p>
                                <div className="bg-blue-50 p-4 rounded-lg my-6">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">
                                        Was dich erwartet:
                                    </h3>
                                    <ul className="list-disc list-inside space-y-1 text-gray-700">
                                        <li>Mehrschrittige Rechnungen</li>
                                        <li>Prozentrechnung</li>
                                        <li>VerhÃ¤ltnisse und Durchschnitte</li>
                                        <li>Bruchrechnung und FlÃ¤chen</li>
                                        <li>Preis-Vergleiche</li>
                                    </ul>
                                </div>
                                <div className="bg-purple-50 p-4 rounded-lg my-6">
                                    <h3 className="text-lg font-semibold text-gray-800 mb-2">
                                        Aufbau:
                                    </h3>
                                    <ul className="list-disc list-inside space-y-1 text-gray-700">
                                        <li><strong>Erste Runde:</strong> 3 Aufgaben (Pflicht)</li>
                                        <li><strong>Weitere Runden:</strong> Je 3 Aufgaben (optional)</li>
                                        <li>Nach jeder Runde: weitermachen oder aufhÃ¶ren</li>
                                        <li>Level: <strong>B1/B2 (erweiterte Kenntnisse)</strong></li>
                                    </ul>
                                </div>
                                <p className="text-gray-700">
                                    <strong>Tipp:</strong> Nimm dir Zeit zum Nachdenken. Bei jeder Aufgabe gibt es einen Hinweis!
                                </p>
                            </div>
                            
                            <div className="space-y-4">
                                <label className="block">
                                    <span className="text-gray-700 font-semibold">Dein Name fÃ¼r das Zertifikat:</span>
                                    <input
                                        type="text"
                                        value={username}
                                        onChange={(e) => setUsername(e.target.value)}
                                        className="mt-2 block w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        placeholder="Gib deinen Namen ein"
                                    />
                                </label>
                                <button
                                    onClick={handleStart}
                                    disabled={!username.trim()}
                                    className="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition"
                                >
                                    Los geht's <ChevronRight />
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (stage === 'quiz') {
                const currentData = allRounds[currentRound][currentPuzzle];
                const isCorrect = selectedAnswer === currentData.correct;
                const colors = getColorClasses(currentData.color);

                return (
                    <div className="min-h-screen bg-gradient-to-br from-indigo-50 to-blue-100 p-8">
                        <div className="max-w-3xl mx-auto">
                            <div className="bg-white rounded-lg shadow-xl p-8">
                                <div className="mb-6">
                                    <div className="flex justify-between text-sm text-gray-600 mb-2">
                                        <span>Runde {currentRound + 1} {currentRound === 0 ? '(Pflicht)' : '(Optional)'}</span>
                                        <span>Aufgabe {currentPuzzle + 1} von {allRounds[currentRound].length}</span>
                                    </div>
                                    <div className="mb-2">
                                        <span className={`inline-block ${colors.label} text-gray-800 px-3 py-1 rounded-full text-sm font-semibold`}>
                                            {currentData.category}
                                        </span>
                                    </div>
                                    <div className="w-full bg-gray-200 rounded-full h-2">
                                        <div 
                                            className="bg-blue-600 h-2 rounded-full transition-all"
                                            style={{ 
                                                width: `${((currentPuzzle + 1) / allRounds[currentRound].length) * 100}%` 
                                            }}
                                        />
                                    </div>
                                </div>

                                <div className={`${colors.bg} p-6 rounded-lg mb-8 border-l-4 ${colors.border}`}>
                                    <p className="text-xl text-gray-800 leading-relaxed mb-4">
                                        {currentData.puzzle}
                                    </p>
                                    <p className="text-sm text-gray-600 italic">
                                        WÃ¤hle die richtige Antwort:
                                    </p>
                                </div>

                                {!showFeedback ? (
                                    <>
                                        {showHint && (
                                            <div className="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500 mb-4">
                                                <p className="text-sm font-semibold text-gray-700 mb-1">ðŸ’¡ Tipp:</p>
                                                <p className="text-gray-700">{currentData.hint}</p>
                                            </div>
                                        )}
                                        <button
                                            onClick={() => setShowHint(!showHint)}
                                            className="w-full mb-4 bg-yellow-100 hover:bg-yellow-200 text-gray-800 font-semibold py-2 px-4 rounded-lg border border-yellow-300 transition"
                                        >
                                            {showHint ? 'ðŸ™ˆ Tipp ausblenden' : 'ðŸ’¡ Tipp anzeigen'}
                                        </button>
                                        <div className="grid grid-cols-2 gap-3">
                                            {currentData.options.map((option, index) => (
                                                <button
                                                    key={index}
                                                    onClick={() => handleAnswer(option)}
                                                    className="text-center px-6 py-6 bg-white border-2 border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition text-lg font-semibold"
                                                >
                                                    {option}
                                                </button>
                                            ))}
                                        </div>
                                    </>
                                ) : (
                                    <div className="space-y-6">
                                        <div className={`p-6 rounded-lg ${isCorrect ? 'bg-green-50 border-2 border-green-500' : 'bg-red-50 border-2 border-red-500'}`}>
                                            <h3 className={`text-2xl font-bold mb-3 ${isCorrect ? 'text-green-800' : 'text-red-800'}`}>
                                                {isCorrect ? 'âœ“ Richtig!' : 'âœ— Leider falsch'}
                                            </h3>
                                            {!isCorrect && (
                                                <p className="text-gray-700 mb-3 text-lg">
                                                    Die richtige Antwort ist: <strong>{currentData.correct}</strong>
                                                </p>
                                            )}
                                            <div className={`bg-white p-4 rounded border-l-4 ${colors.border}`}>
                                                <p className="text-sm font-semibold text-gray-700 mb-2">
                                                    {isCorrect ? 'So funktioniert es:' : 'ErklÃ¤rung:'}
                                                </p>
                                                <p className="text-gray-700 leading-relaxed">
                                                    {currentData.explanation}
                                                </p>
                                            </div>
                                        </div>
                                        <button
                                            onClick={handleNext}
                                            className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition"
                                        >
                                            Weiter <ChevronRight />
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                );
            }

            if (stage === 'certificate') {
                const percentage = Math.round((correctAnswers / totalAnswers) * 100);
                const categories = [...new Set(learnings.map(l => l.category))];

                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-50 to-blue-100 p-8">
                        <div className="max-w-4xl mx-auto">
                            <div className="bg-white rounded-lg shadow-2xl p-12 certificate-page">
                                <div className="text-center mb-8">
                                    <Award className="w-20 h-20 text-blue-600 mx-auto mb-4" />
                                    <h1 className="text-4xl font-bold text-gray-800 mb-2">
                                        {showContinueOption ? 'Zwischenergebnis' : 'Mathe-Fortgeschritten Zertifikat'}
                                    </h1>
                                    <p className="text-xl text-gray-600">
                                        {showContinueOption ? 'Erste Runde geschafft!' : 'Alle Runden abgeschlossen!'}
                                    </p>
                                </div>

                                {showContinueOption && (
                                    <div className="bg-blue-50 p-6 rounded-lg mb-8 border-l-4 border-blue-600">
                                        <h2 className="text-xl font-bold text-gray-800 mb-3">
                                            MÃ¶chtest du weitermachen?
                                        </h2>
                                        <p className="text-gray-700 mb-4">
                                            Du hast die erste Runde abgeschlossen! Du kannst jetzt aufhÃ¶ren und dein Zertifikat ausdrucken, 
                                            oder du machst freiwillig weitere Runden mit neuen Aufgaben.
                                        </p>
                                        <div className="flex gap-4 no-print">
                                            <button
                                                onClick={handleContinue}
                                                className="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition"
                                            >
                                                ðŸŽ¯ Weitere Runde machen
                                            </button>
                                            <button
                                                onClick={handleFinish}
                                                className="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition"
                                            >
                                                âœ“ Jetzt beenden
                                            </button>
                                        </div>
                                    </div>
                                )}

                                <div className="border-t-2 border-b-2 border-blue-600 py-6 mb-8 text-center">
                                    <p className="text-lg text-gray-700 mb-2">
                                        Hiermit wird bestÃ¤tigt, dass
                                    </p>
                                    <p className="text-3xl font-bold text-gray-800 mb-2">
                                        {username}
                                    </p>
                                    <p className="text-lg text-gray-700">
                                        das Mathe-Fortgeschritten-Tool absolviert hat
                                    </p>
                                </div>

                                <div className="mb-8">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-4">
                                        Deine Ergebnisse:
                                    </h2>
                                    <div className="bg-blue-50 p-6 rounded-lg mb-4">
                                        <div className="flex justify-between items-center mb-2">
                                            <span className="text-lg text-gray-700">Richtige Antworten:</span>
                                            <span className="text-3xl font-bold text-blue-600">{correctAnswers} / {totalAnswers}</span>
                                        </div>
                                        <div className="w-full bg-gray-200 rounded-full h-4">
                                            <div 
                                                className="bg-blue-600 h-4 rounded-full transition-all"
                                                style={{ width: `${percentage}%` }}
                                            />
                                        </div>
                                        <p className="text-center text-gray-600 mt-2">{percentage}% korrekt</p>
                                    </div>
                                </div>

                                <div className="mb-8">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-4">
                                        Erfolgreich gemeisterte Aufgabentypen:
                                    </h2>
                                    {categories.length > 0 ? (
                                        <div className="grid grid-cols-2 gap-3 mb-4">
                                            {categories.map((category, index) => (
                                                <div key={index} className="bg-blue-50 p-3 rounded-lg border-l-4 border-blue-600">
                                                    <p className="font-semibold text-gray-800">âœ“ {category}</p>
                                                </div>
                                            ))}
                                        </div>
                                    ) : (
                                        <div className="bg-gray-50 p-4 rounded-lg">
                                            <p className="text-gray-600 text-center">
                                                Noch keine Aufgaben erfolgreich gelÃ¶st.
                                            </p>
                                        </div>
                                    )}
                                </div>

                                <div className="mb-8">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-4">
                                        Was du richtig gelÃ¶st und gelernt hast:
                                    </h2>
                                    {learnings.length > 0 ? (
                                        <div className="space-y-4">
                                            {learnings.map((learning, index) => (
                                                <div key={index} className="bg-gray-50 p-4 rounded-lg border-l-4 border-blue-600">
                                                    <p className="font-semibold text-gray-800 mb-1">
                                                        âœ“ {learning.category}
                                                    </p>
                                                    <p className="text-sm text-gray-600 italic mb-2">
                                                        {learning.puzzle}
                                                    </p>
                                                    <p className="text-gray-700 text-sm">
                                                        {learning.explanation}
                                                    </p>
                                                </div>
                                            ))}
                                        </div>
                                    ) : (
                                        <div className="bg-gray-50 p-6 rounded-lg text-center">
                                            <p className="text-gray-600">
                                                Du hast noch keine Aufgabe richtig gelÃ¶st. Versuche es noch einmal!
                                            </p>
                                        </div>
                                    )}
                                </div>

                                <div className="text-center text-gray-600 text-sm mb-6">
                                    <p>{new Date().toLocaleDateString('de-DE', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
                                </div>

                                {!showContinueOption && (
                                    <div className="flex gap-4 no-print">
                                        <button
                                            onClick={handlePrint}
                                            className="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg flex items-center justify-center gap-2 transition"
                                        >
                                            <Printer /> Zertifikat drucken
                                        </button>
                                        <button
                                            onClick={() => window.location.reload()}
                                            className="flex-1 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-lg transition"
                                        >
                                            Neu starten
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>

                        <style>{`
                            @media print {
                                .no-print {
                                    display: none !important;
                                }
                                .certificate-page {
                                    box-shadow: none !important;
                                    page-break-after: avoid;
                                }
                                body {
                                    background: white !important;
                                }
                            }
                        `}</style>
                    </div>
                );
            }
        };

        ReactDOM.render(<MathAdvancedQuiz />, document.getElementById('root'));
    </script>
</body>
</html>
